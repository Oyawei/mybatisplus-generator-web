<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>AmpMind System</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="renderer" content="webkit"/>
    <meta name="viewport" content="width=1200"/>
    <link rel="stylesheet" th:href="@{/css/element-ui.css}">
    <style>
        #app {
            line-height: 30px;
            margin: 100px auto;
            width: 400px;
            text-align: center;
        }

        #app button {
            width: 300px;
            margin: 10px auto;
        }
    </style>
</head>
<body>
<div id="app">
    <el-form ref="form" :model="form" label-width="80px">
        <el-form-item label="用户名">
            <el-input v-model="form.username"></el-input>
        </el-form-item>
        <el-form-item label="密码">
            <el-input type="password" v-model="form.password"></el-input>
        </el-form-item>
        <el-form-item>
            <el-button type="primary" @click="onSubmit">登录</el-button>
        </el-form-item>
    </el-form>
</div>

<script th:src="@{/js/util/jquery.js}"></script>
<script th:src="@{/js/util/vue.js}"></script>
<script th:src="@{/js/util/vue-resource.js}"></script>
<script th:src="@{/js/util/element-ui.js}"></script>
<script th:src="@{/js/util/util-core.js}"></script>

<script th:inline="javascript">
    $UC = {
        ctxPath: /*[[${#httpServletRequest.getContextPath()}]]*/ null,
        ctxStatic: /*[[${#httpServletRequest.getContextPath()}]]*/ null
    };
</script>

<script>
    var data = {
        form: {
            username:'admin',
            password:'admin'
        }
    };
    new Vue({
        el: '#app',
        data: data,
        methods: {
            onSubmit: function () {
                var _this = this;
                console.log(_this.form)
                $UU.http.post("/login", {"username":_this.form.username,"password":_this.form.password}, function (data) {
                        //获取回调数据
                        if (data) {
                            _this.$message.success("登录成功");
                            location.href = $UC.ctxPath + "/index";
                        }else{
                            _this.$message.success("用户名密码错误");
                        }

                    }
                );
            },
            logout: function () {
                location.href = $UC.ctxPath + "/logout";
            }
        }

    });

</script>
</body>

</html>